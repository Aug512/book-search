{"version":3,"sources":["components/Modal/Modal.module.scss","store/initialState.js","store/actions.js","store/reducer.js","store/store.js","utils/infiniteScroll.js","store/actionCreators.js","components/BookItem/BookItem.js","components/Modal/Modal.js","components/ErrPopup/ErrPopup.js","components/Loader/Loader.js","utils/timer.js","components/App/App.js","index.js","components/App/App.module.scss","components/BookItem/BookItem.module.scss","components/ErrPopup/ErrPopup.module.scss"],"names":["module","exports","initialState","offset","limit","books","showLoader","booksNotFound","selectedBook","lastSearch","error","SET_OFFSET","STORE_REQUEST","FETCH_BOOKS_START","FETCH_BOOKS_SUCCESS","FETCH_BOOKS_FAILURE","CLEAR_BOOKS","BOOKS_NOT_FOUND","SELECT_BOOK","reducer","state","action","type","payload","store","createStore","composeWithDevTools","applyMiddleware","thunk","addInfScroll","document","documentElement","getBoundingClientRect","bottom","clientHeight","currentOffset","getState","dispatch","setOffset","removeEventListener","setCurrentBook","book","fetchBooks","search","a","requestParam","split","join","trim","fetch","then","response","json","docs","length","addEventListener","BookItem","useDispatch","openBookByKeyboard","evt","key","target","click","className","styles","onClick","tabIndex","onFocus","onBlur","cover_i","book__cover","src","alt","title","book__cover_placeholder","book__info","book__info_title","book__info_authors","Array","isArray","author_name","Modal","isbn","useSelector","overlay","useRef","modal","closeModal","current","classList","remove","show","setTimeout","useEffect","add","focus","ref","bookData","e","stopPropagation","closeModalBtn","bookData__cover","bookData__cover_placeholder","bookData__info","bookData__info_title","bookData__info_author","bookData__info_additional","bookData__info_addTitle","bookData__info_addValue","publish_date","publisher","slice","ErrPopup","errorPopup","message","popup","Loader","Timer","fn","t","timerObj","this","stop","clearTimeout","start","reset","newT","App","isLoading","isError","notFoundMessage","searchInput","disclaimer","timer","value","memoizedFetch","useCallback","app","search__input","onChange","placeholder","search__button","id","noBooks","map","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.bac7cfde.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__1TgzI\",\"show\":\"Modal_show__1k4KI\",\"closeModalBtn\":\"Modal_closeModalBtn__3ingD\",\"bookData\":\"Modal_bookData__2rRut\",\"bookData__cover\":\"Modal_bookData__cover__1HcMf\",\"bookData__cover_placeholder\":\"Modal_bookData__cover_placeholder__3M3nF\",\"bookData__info_title\":\"Modal_bookData__info_title__20AKR\",\"bookData__info_author\":\"Modal_bookData__info_author__2AY8b\",\"bookData__info_additional\":\"Modal_bookData__info_additional__2QYKT\",\"bookData__info_addTitle\":\"Modal_bookData__info_addTitle__3TwEa\",\"bookData__info_addValue\":\"Modal_bookData__info_addValue__31WWg\"};","const initialState = {\n  offset: 0,\n  limit: 10,\n  books: [],\n  showLoader: false,\n  booksNotFound: false,\n  selectedBook: null,\n  lastSearch: '',\n  error: null,\n}\n\nexport default initialState\n","export const SET_OFFSET = \"SET_OFFSET\"\nexport const STORE_REQUEST = \"STORE_REQUEST\"\n\nexport const FETCH_BOOKS_START = \"FETCH_BOOKS_START\"\nexport const FETCH_BOOKS_SUCCESS = \"FETCH_BOOKS_SUCCESS\"\nexport const FETCH_BOOKS_FAILURE = \"FETCH_BOOKS_FAILURE\"\nexport const CLEAR_BOOKS = \"CLEAR_BOOKS\"\n\nexport const BOOKS_NOT_FOUND = \"BOOKS_NOT_FOUND\"\nexport const SELECT_BOOK = \"SELECT_BOOK\"\n","import initialState from './initialState'\nimport { SET_OFFSET, STORE_REQUEST } from './actions'\nimport { FETCH_BOOKS_START, FETCH_BOOKS_SUCCESS, FETCH_BOOKS_FAILURE, CLEAR_BOOKS } from './actions'\nimport { BOOKS_NOT_FOUND, SELECT_BOOK } from './actions'\n\nconst reducer = (state = initialState, action) => {\n  \n  switch (action.type) {\n    case SET_OFFSET:\n      return {\n        ...state,\n        offset: action.payload,\n      }\n\n    case FETCH_BOOKS_START:\n      return {\n        ...state,\n        booksNotFound: false,\n        showLoader: true,\n        error: null,\n      }\n\n    case BOOKS_NOT_FOUND:\n      return {\n        ...state,\n        booksNotFound: true,\n        showLoader: false,\n      }\n    \n    case FETCH_BOOKS_SUCCESS:\n      if (state.offset === 0 ) {\n        return {\n          ...state,\n          books: action.payload,\n          showLoader: false,\n        }\n      } else {\n        return {\n          ...state,\n          books: [\n            ...state.books,\n            ...action.payload,\n          ],\n          showLoader: false,\n        }\n      }\n      \n\n    case FETCH_BOOKS_FAILURE:\n      return {\n        ...state,\n        showLoader: false,\n        error: action.payload,\n      }\n\n    case CLEAR_BOOKS:\n      return {\n        ...state,\n        booksNotFound: false,\n        showLoader: false,\n        books: [],\n      }\n\n    case SELECT_BOOK:\n      return {\n        ...state,\n        selectedBook: action.payload,\n      }\n\n    case STORE_REQUEST:\n      return {\n        ...state,\n        lastSearch: action.payload,\n      }\n  \n    default:\n      return state\n  }\n}\n\nexport default reducer\n","import { createStore, applyMiddleware } from 'redux'\nimport { composeWithDevTools } from 'redux-devtools-extension'\nimport thunk from 'redux-thunk'\nimport reducer from './reducer'\n\nconst store = createStore(reducer, composeWithDevTools(applyMiddleware(thunk)))\n\nexport default store\n","import { setOffset } from '../store/actionCreators'\nimport store from '../store/store'\n\nconst addInfScroll = () => {\n  let windowRelativeBottom = document.documentElement.getBoundingClientRect().bottom\n  if (windowRelativeBottom < document.documentElement.clientHeight + 1) {\n    const currentOffset = store.getState().offset\n    const limit = store.getState().limit\n\n    store.dispatch(setOffset(currentOffset + limit))\n    document.removeEventListener('scroll', addInfScroll)\n  }\n}\n\nexport default addInfScroll\n","import { SET_OFFSET, STORE_REQUEST } from './actions'\nimport { FETCH_BOOKS_START, FETCH_BOOKS_SUCCESS, FETCH_BOOKS_FAILURE, CLEAR_BOOKS } from './actions'\nimport { BOOKS_NOT_FOUND, SELECT_BOOK } from './actions'\nimport addInfScroll from '../utils/infiniteScroll'\n\nexport const setOffset = (offset) => {\n  return {\n    type: SET_OFFSET,\n    payload: offset,\n  }\n}\n\nexport const requestBooks = () => {\n  return {\n    type: FETCH_BOOKS_START,\n  }\n}\n\nexport const requestBooksSuccess = (books) => {\n  return {\n    type: FETCH_BOOKS_SUCCESS,\n    payload: books,\n  }\n}\n\nexport const requestBooksFailure = (error) => {\n  return {\n    type: FETCH_BOOKS_FAILURE,\n    payload: error,\n  }\n}\n\nexport const clearBooksList = () => {\n  return {\n    type: CLEAR_BOOKS,\n  }\n}\n\nexport const setNotFoundMessage = (boolstate) => {\n  return {\n    type: BOOKS_NOT_FOUND,\n    payload: boolstate,\n  }\n}\n\nexport const setCurrentBook = (book) => {\n  return {\n    type: SELECT_BOOK,\n    payload: book,\n  }\n}\n\nexport const storeLastRequest = (string) => {\n  return {\n    type: STORE_REQUEST,\n    payload: string,\n  }\n}\n\n// async\n\nexport const fetchBooks = (search) => {\n  return async (dispatch, getState) => {\n    const requestParam = search.split(' ').join('+')\n    const offset = getState().offset\n    const lastSearch = getState().lastSearch\n\n    try {\n      if (search.trim() && (search !== lastSearch || offset !== 0)) {\n        dispatch(requestBooks())\n        const response = await fetch(`https://openlibrary.org/search.json?title=${requestParam}&limit=10&offset=${offset}`)\n          .then(response => response.json())\n        if (response.docs.length === 0 && getState().books.length === 0) {\n          dispatch(setNotFoundMessage(true))\n        } else {\n          dispatch(requestBooksSuccess(response.docs))\n        }\n        if (response.docs.length > 0) document.addEventListener('scroll', addInfScroll)\n      } else if (!search.trim()) {\n        dispatch(clearBooksList())\n      } else return\n    } catch (err) {\n      dispatch(requestBooksFailure(err))\n    }\n    dispatch(storeLastRequest(search))\n  }\n}\n","import React from 'react'\nimport { useDispatch } from 'react-redux' \nimport { setCurrentBook } from '../../store/actionCreators'\nimport styles from './BookItem.module.scss'\n\nconst BookItem = ({ book }) => {\n\n  const dispatch = useDispatch()\n\n  const openBookByKeyboard = (evt) => {\n    if (evt.key === ' ' || evt.key === 'Enter') {\n      evt.target.click();\n    }\n  } \n\n  const focusBookHandler = (evt) => {\n    evt.target.addEventListener('keypress', openBookByKeyboard)\n  }\n\n  const blurBookHandler = (evt) => {\n    evt.target.removeEventListener('keypress', openBookByKeyboard)\n  }\n\n  return (\n    <div\n      className={styles.book}\n      onClick={() => dispatch(setCurrentBook(book))}\n      tabIndex='0'\n      onFocus={focusBookHandler}\n      onBlur={blurBookHandler}\n    >\n    {book.cover_i && book.cover_i !== -1\n      ? <img\n        className={styles.book__cover}\n        src={`https://covers.openlibrary.org/b/id/${book.cover_i}-M.jpg`}\n        alt={`${book.title} cover`}\n      />\n      : <div className={`${styles.book__cover_placeholder} ${styles.book__cover}`} />\n    }\n    <div className={styles.book__info}>\n      <h2 className={styles.book__info_title}>{book.title}</h2>\n      <hr />\n      <h4 className={styles.book__info_authors}>\n        {Array.isArray(book.author_name)\n          ? book.author_name.join(', ')\n          : book.author_name\n        }\n      </h4>\n    </div>\n  </div>\n  )\n}\n\nexport default BookItem\n","import React, { useEffect, useRef } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { setCurrentBook } from '../../store/actionCreators'\nimport styles from './Modal.module.scss'\n\nconst Modal = () => {\n  const book = useSelector(state => state.selectedBook)\n  const dispatch = useDispatch()\n\n  const overlay = useRef()\n  const modal = useRef()\n\n  const formatIsbn = (isbn) => {\n    if (isbn.length === 13) {\n      return `${isbn.slice(0, 3)}-${isbn[3]}-${isbn.slice(4, 8)}-${isbn.slice(8, 12)}-${isbn[12]}`\n    } else if (isbn.length === 10) {\n      return `${isbn[0]}-${isbn.slice(1, 5)}-${isbn.slice(5, 9)}-${isbn[9]}`\n    } else return isbn\n  }\n\n  const closeModal = () => {\n    overlay.current.classList.remove(styles.show)\n\n    setTimeout(() => dispatch(setCurrentBook(null)), 600)\n  }\n\n  useEffect(() => {\n    overlay.current.classList.add(styles.show)\n\n    modal.current.focus()\n  }, [])\n\n  return (\n    <div ref={overlay} className={styles.overlay} onClick={closeModal}>\n      <main ref={modal} className={styles.bookData} onClick={e => e.stopPropagation()} tabIndex='1'>\n      <button\n        className={styles.closeModalBtn}\n        onClick={closeModal}\n        tabIndex='1'\n      >\n        &times;\n      </button>\n        {book.cover_i && book.cover_i !== -1\n          ? <img\n            className={styles.bookData__cover}\n            src={`https://covers.openlibrary.org/b/id/${book.cover_i}-L.jpg`}\n            alt={`${book.title} cover`}\n          />\n          : <div className={`${styles.bookData__cover_placeholder} ${styles.bookData__cover}`} />\n        }\n        <div className={styles.bookData__info}>\n          <h2 className={styles.bookData__info_title}>\n            {book.title}\n          </h2>\n          <p className={styles.bookData__info_author}>\n            {book.author_name.length > 1\n              ? <>Авторы: <b>{book.author_name.join(', ')}</b></>\n              : <>Автор: <b>{book.author_name}</b></>\n            }\n          </p>\n          <div className={styles.bookData__info_additional}>\n            <b className={styles.bookData__info_addTitle}>Дата публикации:</b>\n            <span className={styles.bookData__info_addValue}>\n              {book.publish_date[0]}\n            </span>\n          </div>\n          <div className={styles.bookData__info_additional}>\n            <b className={styles.bookData__info_addTitle}>Издатель:</b>\n            <span className={styles.bookData__info_addValue}>\n              {book.publisher[0]}\n            </span>\n          </div>\n          <div className={styles.bookData__info_additional}>\n            <b className={styles.bookData__info_addTitle}>ISBN:</b>\n            <span className={styles.bookData__info_addValue}>\n              {book.isbn? formatIsbn(book.isbn[0]) : 'ISBN отсутствует'}\n            </span>\n          </div>\n        </div>\n      </main>\n    </div>\n  )\n}\n\nexport default Modal\n","import React, { useEffect, useRef } from 'react'\nimport { useSelector } from 'react-redux'\nimport styles from './ErrPopup.module.scss'\n\nconst ErrPopup = () => {\n\n  const errorPopup = useRef()\n\n  useEffect(() => {\n    errorPopup.current.classList.add(styles.show)\n    setTimeout(() => {\n      errorPopup.current.classList.remove(styles.show)\n    }, 3000)\n  }, [])\n\n  const message = useSelector(state => state.error.message ?? \"Непредвиденная ошибка. Перезагрузите страницу, или попробуйте позже...\")\n\n  return (\n    <div className={styles.popup} ref={errorPopup}>\n      <strong className={styles.message}>{message}</strong>\n    </div>\n  )\n}\n\nexport default ErrPopup\n","import React from 'react'\nimport './Loader.css'\n\nconst Loader = () => <div className=\"lds-ring\"><div></div><div></div><div></div><div></div></div>\n\nexport default Loader\n","function Timer(fn, t) {\n  let timerObj = setTimeout(fn, t)\n\n  this.stop = function() {\n    if (timerObj) {\n      clearTimeout(timerObj)\n      timerObj = null\n    }\n    return this\n  }\n\n  this.start = function() {\n    if (!timerObj) {\n      this.stop()\n      timerObj = setTimeout(fn, t)\n    }\n    return this\n  }\n\n  this.reset = function(newT = t) {\n    t = newT\n    return this.stop().start()\n  }\n}\n\nexport default Timer\n","import { useRef, useEffect, useCallback } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { fetchBooks, setOffset } from '../../store/actionCreators'\nimport BookItem from '../BookItem/BookItem'\nimport Modal from '../Modal/Modal'\nimport ErrPopup from '../ErrPopup/ErrPopup'\nimport Loader from '../Loader/Loader'\nimport addInfScroll from '../../utils/infiniteScroll'\nimport Timer from '../../utils/timer'\nimport styles from './App.module.scss'\n\nconst App = () => {\n  const offset = useSelector(state => state.offset)\n  const books = useSelector(state => state.books)\n  const lastSearch = useSelector(state => state.lastSearch)\n  const isLoading = useSelector(state => state.showLoader)\n  const isError = useSelector(state => state.error ?? false)\n  const notFoundMessage = useSelector(state => state.booksNotFound)\n  const selectedBook = useSelector(state => state.selectedBook)\n\n  const dispatch = useDispatch()\n\n  const searchInput = useRef()\n  const disclaimer = useRef()\n\n  const timer = new Timer(() => {\n    dispatch(fetchBooks(searchInput.current.value))\n  }, 1000)\n  timer.stop()\n\n  const memoizedFetch = useCallback(() => {\n    if (offset !== 0 || searchInput.current.value.trim() !== lastSearch) {\n      timer.reset()\n    }\n  }, [offset, lastSearch])\n\n  useEffect(() => {\n    document.removeEventListener('scroll', addInfScroll)\n    memoizedFetch()\n  }, [offset, memoizedFetch])\n\n  useEffect(() => {\n    if (books.length === 0) {\n      disclaimer.current.classList.add(`${styles.show}`)\n    } \n  }, [books])\n\n  return (\n    <div className={styles.app}>\n      {isError && <ErrPopup />}\n      {selectedBook && <Modal />}\n      <h1 className={styles.title}>\n        Книги\n      </h1>\n      <div className={styles.search}>\n        <input\n          className={styles.search__input}\n          type=\"text\"\n          onChange={(e) => {\n            if (offset !== 0) dispatch(setOffset(0))\n            timer.reset()\n          }}\n          placeholder='Введите название книги'\n          ref={searchInput}\n        />\n        <button\n          className={styles.search__button}\n          onClick={() => {timer.stop(); dispatch(fetchBooks(searchInput.current.value))}}\n        >\n          Найти\n        </button>\n      </div>\n\n      {books.length === 0 && <small id='disclaimer' className={styles.disclaimer} ref={disclaimer}>\n      Так как API не поддерживает русский язык, для поиска книги вводите её название транслитом, например <b>\"Ponedel'nik nachinaetsya v subbotu\"</b>\n      </small>}\n      \n      {isLoading && books.length === 0 && <Loader />}\n\n      {notFoundMessage\n        ? <p className={styles.noBooks}>К сожалению, по вашему запросу ничего найти не удалось</p>\n        : <div className='books'>\n            {books.map(book => <BookItem book={book} key={book.key} />)}\n          </div>\n      }\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { Provider } from 'react-redux'\nimport store from './store/store'\nimport App from './components/App/App'\nimport './index.css'\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__3BT4Y\",\"title\":\"App_title__2C-7r\",\"search\":\"App_search__2Y1TS\",\"search__input\":\"App_search__input__8eVFo\",\"search__button\":\"App_search__button__1HI-h\",\"disclaimer\":\"App_disclaimer__2Szu9\",\"show\":\"App_show__3q8px\",\"noBooks\":\"App_noBooks__2fhmZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"book\":\"BookItem_book__1P0te\",\"book__cover\":\"BookItem_book__cover__YGfPK\",\"book__cover_placeholder\":\"BookItem_book__cover_placeholder__3RQcP\",\"book__info_title\":\"BookItem_book__info_title__1GSOz\",\"book__info_authors\":\"BookItem_book__info_authors__8_lfg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"popup\":\"ErrPopup_popup__3Vo8r\",\"message\":\"ErrPopup_message__29wVz\",\"show\":\"ErrPopup_show__3KE3M\"};"],"sourceRoot":""}